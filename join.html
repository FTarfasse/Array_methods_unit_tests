<head>
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Indie+Flower">
  <style>
    body {
      font-family: 'Indie Flower', serif;
      font-size: 15px;
    }
  </style>
</head>
<script src="../simpleTest.js"></script>
<script>

'use strict'

function join(array, separator) {

	if(Array.isArray(array) === false) {

		throw new TypeError ('Unexpected token')

	} else {
		var joinedArray = ''
		
		// separator set up
		if(separator) {
			var separatorEl = separator
		} else {
			var separatorEl = ',';
		}

		for(var i = 0; i < array.length; i++) {
			// managing the absence of last separator
			if(i in array === false) {
				array[i] = '';
			}
			if(i === array.length - 1) {
				joinedArray += array[i];
			} else {
				joinedArray += array[i] + separatorEl;
			}
		}

		// empty arrays
		// if(Object.keys(array).length === 0) {


		return joinedArray;

	}
	
};

tests({
	'Throws TypeError if first argument is not an array': function() {
		var fakeArray = {};
		try {
			join(fakeArray);
			} catch(e) {
			var genError = (e instanceof TypeError);
		};
		eq(genError, true)
	},
	'It should return a new string ': function() {
		var elements = ['earth', 'wind', 'fire', 'water'];
		var result = join(elements);
		eq(typeof(result) === 'string', true)
	},
	'It should return all array elements in a single string': function() {
		var elements = ['earth', 'wind', 'fire', 'water'];
		var result = join(elements);
		eq(result, 'earth,wind,fire,water');
	},
	'It should merge all elements separated by a comma by default': function() {
		var elements = ['earth', 'wind', 'fire', 'water'];
		var result = join(elements);
		eq(result, 'earth,wind,fire,water')
	},
	'It should accept a separator as third argument': function() {
		var elements = ['earth', 'wind', 'fire', 'water'];
		var result = join(elements, '@');
		eq(result, 'earth@wind@fire@water')
	},
	// 'It should throw an error if separator is not a string': function() {
	// 	var elements = ['earth', 'wind', 'fire', 'water'];
  //   try {
  //     join(elements, 2);
  //   } catch(e) {
  //     var isTypeError = (e instanceof TypeError);
  //   }
	// 	eq(isTypeError, true);
	// },
	'It should return the element with no separator for arrays of length = 1': function() {
		var element = ['sun'];
		var result = join(element);
		eq(result, 'sun')
	},
	'It should return an empty string for empty arrays': function() {
		var element = [];
		var result = join(element);
		eq(result[0], undefined)
	},
	'It should return nothing if an element is undefined or null': function() {
		var holes = ['one',                     ,'two', , , ,'three']
		var result = join(holes);
		eq(result, 'one,,two,,,,three')
	}
});

</script>